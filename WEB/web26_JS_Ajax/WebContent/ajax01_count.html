<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Show Count</title>
<script>
	var xhr;
	function startRequest(){
		//1. XMLHttpRequest객체를 생성
		xhr =new XMLHttpRequest();
		//alert(xhr);
		
		//2. 응답받을 함수를 연결
		xhr.onreadystatechange = callback;
		
		//3. open 메소드 안에서 서버상의 어떤 페이지로 요청이 들어갈지를 지정
		//	 true는 비동기 | false는 동기...디폴트가 true
		xhr.open("get","CountServlet?id=encore&&pass=playdata",true);
		
		//4. 서버로 요청이 전송
		xhr.send(null);//get방식일 때 null을 줘야함
		
		
	}//요청이 진행되는 부분
	
	 function callback(){
	 	//성공한 경우만 응답을 받아서 출력해 보도록 하자
	 	if(xhr.readyState ==4){//?
	 		if(xhr.status==200){
	 			var text =xhr.responseText;//out.print();이 안에 넣어서 보낸 text를 받아온다.
	 			document.getElementById("resultView").innerHTML = "<h3><font color='blue'>"+text+"</font></h3>";
	 		}
	 	} 
	 }//응답이 이곳으로 연결되는 부분
</script>
</head>
<body>
<h2>Show Count</h2>
<input type="button" value="Count 증가" onclick="startRequest()">
<p></p>
<span id="resultView"></span>
</body>
</html>